# 埋め込み機能

note.comでは、特定のサービスのURLを埋め込みウィジェットとして表示できます。

## 対応サービス

note.comは以下のサービスの埋め込みに対応しています:

| サービス | 対応状況 | 備考 |
|----------|----------|------|
| YouTube | ✅ | 動画プレーヤーとして埋め込み |
| Twitter/X | ✅ | ツイートカードとして埋め込み |
| note.com記事 | ✅ | 記事カードとして埋め込み |
| GitHub Gist | ✅ | コードスニペットとして埋め込み |
| その他の外部URL | ❌ | 通常のリンクとして表示 |

> **重要**: 一般的な外部URL（例: zenn.dev、qiita.com、example.com等）は埋め込みカードに変換されません。通常のリンクとして表示されます。

## 基本的な使い方

### 対応サービスのURL

対応サービスのURLを単独の行に記述すると、埋め込みウィジェットに変換されます。

```markdown
# 参考動画

この動画がわかりやすいです。

https://www.youtube.com/watch?v=dQw4w9WgXcQ

動画の解説...
```

### 非対応URLの動作

対応していないサービスのURLは、通常のリンクとして表示されます。

```markdown
# 参考記事

https://example.com/article
```

上記のURLは埋め込みカードにはならず、クリック可能なリンクテキストとして表示されます。

## 埋め込みの挿入方法

note.comのエディタで埋め込みを挿入する方法:

1. **直接入力**: 対応サービスのURLを貼り付けてEnterキーを押す
2. **メニューから**: 「+」ボタン → 「埋め込み」 → URLを入力

いずれの方法でも、対応サービスのURLは自動的に埋め込みウィジェットに変換されます。

## note-mcpでの動作

### Markdown入力

note-mcpでは、Markdownから記事を作成する際、URLは以下のように処理されます:

- **対応サービスのURL**: note.comエディタが埋め込みウィジェットに変換
- **非対応のURL**: 通常のリンクとして表示

```markdown
# 技術メモ

## 参考動画

https://www.youtube.com/watch?v=example

## 参考記事（リンクのみ）

https://zenn.dev/example/articles/example
```

上記の例では:
- YouTubeリンク → 埋め込みプレーヤーとして表示
- Zennリンク → 通常のリンクテキストとして表示

### リンクテキストの指定

明示的にリンクテキストを指定したい場合は、Markdown形式を使用してください。

```markdown
[Zennの記事を読む](https://zenn.dev/example/articles/example)
```

## 埋め込みの結果

埋め込みを挿入すると、以下のいずれかの結果になります：

| 結果 | 説明 | 例 |
|------|------|-----|
| 埋め込み成功 | 埋め込みカードが正常に表示される | 有効なYouTube動画URL |
| リンクとして挿入 | 埋め込みができず通常リンクになった | 削除済みツイート、非公開動画 |
| タイムアウト | 処理が完了しなかった | ネットワークエラー等 |

### 埋め込みができない場合

対応サービスのURLでも、以下の場合は埋め込みカードではなくリンクとして挿入されます：

- **削除されたコンテンツ**: 投稿者が削除したツイートや動画
- **非公開コンテンツ**: 限定公開や非公開設定のコンテンツ
- **埋め込み不可設定**: 投稿者が埋め込みを許可していないコンテンツ
- **存在しないURL**: 誤ったURLや存在しないコンテンツ

この場合、システムは即座にリンク挿入を検出し、適切なフィードバックを返します。

```
埋め込みカードではなくリンクとして挿入されました。
URLが無効（削除済み、非公開等）の可能性があります。
URL: https://twitter.com/example/status/deleted_tweet
```

> **補足**: リンクとして挿入された場合でも、記事の作成・更新は正常に完了します。リンクをクリックすれば元のURLにアクセスできます。

## 制限事項

- 埋め込みが有効なのはnote.comが公式に対応しているサービスのみです
- 対応サービスは予告なく変更される場合があります
- 一部の動画やツイートは、投稿者の設定により埋め込みがブロックされる場合があります

## 他の機能との組み合わせ

埋め込みは他のMarkdown機能と組み合わせて使用できます。

```markdown
# 技術ノート

[TOC]

## はじめに

この記事では $${E = mc^2}$$ について解説します。

## 参考動画

以下の動画がわかりやすいです。

https://www.youtube.com/watch?v=example

## まとめ

物理学は面白い。
```

目次、数式などと併用しても正しく処理されます。
